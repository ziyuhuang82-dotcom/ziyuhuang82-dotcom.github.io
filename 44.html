<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æ°´æœè³¼ç‰©ç¶²ç«™</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --accent:#27ae60;
      --muted:#65707a;
      --glass: rgba(255,255,255,0.6);
      font-size: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial;
      background:linear-gradient(180deg,#f6f7fb 0%, #eef3f8 100%);
      color:#14202b;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:24px;
    }

    header{
      display:flex;align-items:center;justify-content:space-between;gap:16px;
      max-width:1100px;margin:0 auto 24px;padding:12px 16px;background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(16,24,40,0.06);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#ffd6a5,#ff9a9e);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:22px}
    .brand h1{margin:0;font-size:1.1rem}
    .search{flex:1;margin-left:12px}
    .search input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb;font-size:0.95rem}

    main{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 320px;gap:20px}

    /* å·¦å´ - å•†å“å€ */
    .shop{
      background:transparent;padding:6px;display:flex;flex-direction:column;gap:16px
    }
    .controls{display:flex;gap:8px;align-items:center}
    .category{padding:8px 12px;border-radius:999px;background:var(--card);box-shadow:0 4px 10px rgba(16,24,40,0.04)}

    .grid{
      display:grid;grid-template-columns:repeat(auto-fill, minmax(200px,1fr));gap:16px
    }
    .card{
      background:var(--card);border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:10px;align-items:flex-start;box-shadow:0 8px 20px rgba(16,24,40,0.05);
    }
    .thumb{width:100%;display:flex;align-items:center;justify-content:center;padding:8px;border-radius:10px;background:linear-gradient(180deg,#fff 0%, #fbfcff 100%)}
    .thumb img{width:86px;height:86px;object-fit:cover;border-radius:10px}

    .meta{display:flex;align-items:center;justify-content:space-between;width:100%}
    .name{font-weight:600}
    .price{font-weight:700;color:var(--accent)}

    .actions{display:flex;gap:8px;width:100%;align-items:center}
    .qty{display:flex;align-items:center;border-radius:8px;background:#f3f6f9;padding:6px}
    .qty button{background:transparent;border:0;padding:6px 10px;font-size:1rem;cursor:pointer}
    .add{margin-left:auto;padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer}

    /* å³å´ - è³¼ç‰©è»Š */
    .cart-wrap{background:var(--card);border-radius:12px;padding:16px;height:fit-content;box-shadow:0 10px 30px rgba(16,24,40,0.06)}
    .cart-head{display:flex;align-items:center;justify-content:space-between}
    .cart-items{margin-top:12px;display:flex;flex-direction:column;gap:12px;min-height:80px}
    .cart-item{display:flex;gap:10px;align-items:center}
    .cart-item img{width:54px;height:54px;border-radius:8px}
    .cart-item .info{flex:1}
    .cart-item .remove{background:transparent;border:0;color:#c0392b;cursor:pointer}

    .total{display:flex;align-items:center;justify-content:space-between;font-weight:700;margin-top:12px}
    .checkout{width:100%;margin-top:12px;padding:10px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#2ecc71);border:0;color:white;font-weight:700;cursor:pointer}

    footer{max-width:1100px;margin:24px auto 0;text-align:center;color:var(--muted)}

    @media (max-width:900px){
      main{grid-template-columns:1fr}
      .cart-wrap{position:sticky;top:84px}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">æœ</div>
      <div>
        <h1>æ°´æœå°èˆ–</h1>
        <div style="color:var(--muted);font-size:0.9rem">æ–°é®®ç›´é€ â€¢ ç•¶å­£å¥½ç‰©</div>
      </div>
    </div>
    <div class="search">
      <input id="searchInput" placeholder="æœå°‹æ°´æœã€åƒ¹æ ¼æˆ–é¡åˆ¥ï¼ˆä¾‹å¦‚ï¼šè˜‹æœã€é¦™è•‰ï¼‰" />
    </div>
    <div style="width:40px;text-align:right">
      <button id="toggleCart" title="è³¼ç‰©è»Š">ğŸ›’</button>
    </div>
  </header>

  <main>
    <section class="shop">
      <div class="controls">
        <div class="category">å…¨éƒ¨å•†å“</div>
        <div style="color:var(--muted);margin-left:auto">å…± <span id="productCount">0</span> é …</div>
      </div>

      <div class="grid" id="productGrid">
        <!-- å•†å“å¡ç‰‡ç”± JS ç”Ÿæˆ -->
      </div>
    </section>

    <aside class="cart-wrap" id="cartWrap">
      <div class="cart-head">
        <div style="font-weight:700">è³¼ç‰©è»Š</div>
        <div style="color:var(--muted);font-size:0.9rem">å¿«é€Ÿçµå¸³</div>
      </div>

      <div class="cart-items" id="cartItems">
        <div style="color:var(--muted)">ç›®å‰è³¼ç‰©è»Šç‚ºç©ºã€‚</div>
      </div>

      <div class="total">
        <div>åˆè¨ˆ</div>
        <div id="cartTotal">NT$0</div>
      </div>
      <button class="checkout" id="checkoutBtn">å‰å¾€çµå¸³</button>
    </aside>
  </main>

  <footer>Â© æ°´æœå°èˆ– â€” ç¯„ä¾‹ç¶²ç«™  â€¢  å¯ç”¨æ–¼å­¸æ ¡å°ˆé¡Œæˆ–ç·´ç¿’</footer>

  <script>
    const products = [
      {id:1,name:'å°ç£é’è˜‹æœ',price:65,img:'https://images.unsplash.com/photo-1571689933887-1b8d3e2a6b1f?auto=format&fit=crop&w=400&q=60'},
      {id:2,name:'ç”œé¦™é¦™è•‰',price:45,img:'https://images.unsplash.com/photo-1574226516831-e1dff420e8f8?auto=format&fit=crop&w=400&q=60'},
      {id:3,name:'å¤šæ±æ©™å­',price:80,img:'https://images.unsplash.com/photo-1517731723590-6d718bcd1f8b?auto=format&fit=crop&w=400&q=60'},
      {id:4,name:'æ«»æ¡ƒ (å°ç›’)',price:150,img:'https://images.unsplash.com/photo-1502741126161-b048400d6b6a?auto=format&fit=crop&w=400&q=60'},
      {id:5,name:'èŠ’æœï¼ˆå¤å­£ï¼‰',price:120,img:'https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?auto=format&fit=crop&w=400&q=60'},
      {id:6,name:'å¥‡ç•°æœ',price:90,img:'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=400&q=60'}
    ];

    const productGrid = document.getElementById('productGrid');
    const productCount = document.getElementById('productCount');
    const searchInput = document.getElementById('searchInput');
    const cartItemsEl = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const toggleCartBtn = document.getElementById('toggleCart');
    const cartWrap = document.getElementById('cartWrap');

    let cart = {};

    function formatMoney(n){ return 'NT$' + Number(n).toLocaleString(); }

    function renderProducts(list){
      productGrid.innerHTML = '';
      list.forEach(p=>{
        const card = document.createElement('div'); card.className='card';

        card.innerHTML = `
          <div class="thumb"><img src="${p.img}" alt="${p.name}" loading="lazy"></div>
          <div class="meta">
            <div class="name">${p.name}</div>
            <div class="price">${formatMoney(p.price)}</div>
          </div>
          <div class="actions">
            <div class="qty" data-id="${p.id}">
              <button class="dec">-</button>
              <div class="val">1</div>
              <button class="inc">+</button>
            </div>
            <button class="add" data-id="${p.id}">åŠ å…¥è³¼ç‰©è»Š</button>
          </div>
        `;

        productGrid.appendChild(card);
      });
      productCount.textContent = list.length;
    }

    // åˆæ¬¡é¡¯ç¤ºæ‰€æœ‰å•†å“
    renderProducts(products);

    // æ•¸é‡æ§åˆ¶ & åŠ å…¥è³¼ç‰©è»Šäº‹ä»¶ä»£ç†
    productGrid.addEventListener('click', e=>{
      const inc = e.target.closest('.inc');
      const dec = e.target.closest('.dec');
      const add = e.target.closest('.add');
      if(inc||dec){
        const wrap = (inc||dec).closest('.qty');
        const valEl = wrap.querySelector('.val');
        let val = parseInt(valEl.textContent,10);
        if(inc) val++; else val = Math.max(1, val-1);
        valEl.textContent = val;
      }
      if(add){
        const id = Number(add.dataset.id);
        const wrap = add.closest('.card').querySelector('.qty');
        const qty = Number(wrap.querySelector('.val').textContent);
        addToCart(id, qty);
      }
    });

    // æœå°‹
    searchInput.addEventListener('input', ()=>{
      const q = searchInput.value.trim().toLowerCase();
      const filtered = products.filter(p=> (p.name + ' ' + p.price).toLowerCase().includes(q));
      renderProducts(filtered);
    });

    function addToCart(id, qty=1){
      const prod = products.find(p=>p.id===id);
      if(!prod) return;
      if(cart[id]) cart[id].qty += qty; else cart[id] = { ...prod, qty };
      renderCart();
      flashCart();
    }

    function renderCart(){
      cartItemsEl.innerHTML = '';
      const keys = Object.keys(cart);
      if(keys.length===0){ cartItemsEl.innerHTML = '<div style="color:var(--muted)">ç›®å‰è³¼ç‰©è»Šç‚ºç©ºã€‚</div>'; cartTotalEl.textContent='NT$0'; return; }
      let total = 0;
      keys.forEach(k=>{
        const item = cart[k];
        total += item.price * item.qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="info">
            <div style="font-weight:600">${item.name}</div>
            <div style="color:var(--muted);font-size:0.9rem">${item.qty} Ã— ${formatMoney(item.price)}</div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:700">${formatMoney(item.price * item.qty)}</div>
            <button class="remove" data-id="${item.id}">ç§»é™¤</button>
          </div>
        `;
        cartItemsEl.appendChild(div);
      });
      cartTotalEl.textContent = formatMoney(total);
    }

    // cart äº‹ä»¶ä»£ç† (ç§»é™¤)
    cartItemsEl.addEventListener('click', e=>{
      const rm = e.target.closest('.remove');
      if(rm){
        const id = Number(rm.dataset.id);
        delete cart[id];
        renderCart();
      }
    });

    // checkout
    checkoutBtn.addEventListener('click', ()=>{
      const keys = Object.keys(cart);
      if(keys.length===0){ alert('è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼Œè«‹å…ˆåŠ å…¥å•†å“ã€‚'); return; }
      let summary = 'è¨‚å–®æ˜ç´°:\n';
      let total = 0;
      keys.forEach(k=>{ const it = cart[k]; summary += `${it.name} Ã— ${it.qty} = ${formatMoney(it.qty*it.price)}\n`; total += it.qty*it.price; });
      summary += `åˆè¨ˆï¼š${formatMoney(total)}\n\nï¼ˆæ­¤ç‚ºç¯„ä¾‹ç¶²ç«™ï¼Œæœªä¸²æ¥ä»˜æ¬¾ï¼‰`;
      alert(summary);
    });

    // toggle cart (å°åŠŸèƒ½ï¼šæ»‘å‹•é¡¯ç¤º/éš±è—å³å´)
    toggleCartBtn.addEventListener('click', ()=>{
      if(cartWrap.style.transform === 'translateX(8px)'){
        cartWrap.style.transform = '';
        cartWrap.style.transition = 'transform .28s ease';
      } else {
        cartWrap.style.transform = 'translateX(8px)';
        cartWrap.style.transition = 'transform .28s ease';
      }
    });

    function flashCart(){
      toggleCartBtn.animate([{transform:'scale(1)'},{transform:'scale(1.18)'},{transform:'scale(1)'}],{duration:320});
    }

    // æœ€åˆæ¸²æŸ“
    renderCart();
  </script>
</body>
</html>
